<h2>Editing contact for {{contact.fullName}}</h2>

<form [formGroup]="contactForm" novalidate (submit)="updateContact()">
  <div class="form-group" [class.has-error]="shouldDisplayErrorFor('firstName')">
    <label for="first-name-field" class="control-label">First name</label>
    <input id="first-name-field" class="form-control" formControlName="firstName" />

    <div class="help-block" *ngIf="shouldDisplayErrorFor('firstName')">
      First name is required
    </div>
  </div>

  <div class="form-group" [class.has-error]="shouldDisplayErrorFor('lastName')">
    <label for="last-name-field" class="control-label">Last name</label>
    <input id="last-name-field" class="form-control" formControlName="lastName" />

    <div class="help-block" *ngIf="shouldDisplayErrorFor('lastName')">
      Last name is required
    </div>
  </div>

  <div class="form-group" [class.has-error]="shouldDisplayErrorFor('email')">
    <label for="email-field" class="control-label">Email</label>
    <input id="email-field" class="form-control" type="text" formControlName="email" />

    <!--TODO figure out how to dry up these messages (or create custom messages directive-->
    <div class="help-block" *ngIf="hasErrorFor('email', 'required')">
      Email address is required
    </div>

    <div class="help-block" *ngIf="hasErrorFor('email', 'email')">
      Invalid email address
    </div>
  </div>

  <div class="form-group" [class.has-error]="shouldDisplayErrorFor('phone')">
    <label for="phone-field" class="control-label">Phone</label>
    <input id="phone-field" class="form-control" type="text" formControlName="phone" />

    <div class="help-block" *ngIf="hasErrorFor('phone', 'phone')">
      Invalid phone number format
    </div>
  </div>

  <div class="form-group">
    <label for="favourite-checkbox" class="control-label">Favourite</label>
    <input id="favourite-checkbox" class="form-control" type="checkbox" formControlName="favourite" />
  </div>

  <button [disabled]="contactForm.invalid"
          type="submit" class="btn btn-success">Update</button>
</form>
